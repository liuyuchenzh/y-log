{"version":3,"file":"index.mjs","sources":["../src/util/log.ts","../src/index.ts"],"sourcesContent":["export const UID: string = `log${new Date().getTime()}`;\ninterface Cache {\n  container?: HTMLElement;\n}\nconst cache: Cache = {};\nconst makeContainer = (): HTMLElement => {\n  const div: HTMLElement = document.createElement(\"div\");\n  div.id = UID;\n  div.style.cssText = `\n  z-index: 999;\n  padding: 16px;\n  height: 300px;\n  overflow: auto;\n  line-height: 1.4;\n  background: rgb(36, 36, 36);\n  color: rgb(255, 255, 255);\n  font-size: 16px;\n  font-family: monospace, consolas, \"Hiragino Sans GB\", \"Microsoft YaHei\", 微软雅黑, Arial, sans-serif;\n  border: none;\n  text-align: left;`;\n\n  // @side-effect\n  cache.container = div;\n  return div;\n};\nconst init = (): void => {\n  const container: HTMLElement = cache.container || makeContainer();\n  const firstChild: Element = document.body.children[0];\n  if (firstChild && typeof firstChild === \"object\" && firstChild.id === UID) {\n    return;\n  }\n  document.body.insertBefore(container, firstChild);\n};\n\nconst makeLog = (tag: keyof HTMLElementTagNameMap = \"pre\"): HTMLElement => {\n  const log: HTMLElement = document.createElement(tag);\n  log.style.cssText = `\n    color: #fff;\n    font-size: 14px;\n    line-height: 1.4;\n    padding: 2px 10px;\n  `;\n  return log;\n};\n\nconst printOut = (input: string, safeMode: boolean = false) => {\n  const log: HTMLElement = makeLog();\n  log.innerText = input;\n  if (safeMode) {\n    const container = document.getElementById(UID);\n    if (!container) {\n      init();\n    }\n  }\n  if (cache.container) {\n    cache.container.appendChild(log);\n  }\n};\n\nexport { init, printOut };\n","import { init, printOut, UID } from \"./util/log\";\nconst cache = {\n  init: false\n};\nconst log = {\n  id: UID,\n  log: (input: string, safeMode: boolean = false): void => {\n    if (!cache.init) {\n      init();\n      cache.init = true;\n    }\n    printOut(input, safeMode);\n  }\n};\n\n// print multi input\nfunction loopLog(...input: any[]) {\n  for (let i = 0; i < input.length; i++) {\n    try {\n      log.log(input[i].toString());\n    } catch (e) {\n      log.log(`${input[i]}`);\n    }\n  }\n}\n\n// compatible with console.log\nif (!window.console) {\n  // @ts-ignore\n  window.console = {\n    log: loopLog\n  };\n} else {\n  const standardLog = window.console.log;\n  window.console.log = function(...input: any[]) {\n    standardLog.call(window.console, ...input);\n    loopLog(...input);\n  };\n}\n\nexport default log;\n"],"names":["UID","Date","getTime","cache","init","div","container","document","createElement","id","style","cssText","firstChild","body","children","insertBefore","printOut","input","safeMode","log","tag","makeLog","innerText","getElementById","appendChild","loopLog","_i","i","length","toString","e","window","console","standardLog_1","call"],"mappings":"AAAO,IAAMA,EAAc,OAAM,IAAIC,MAAOC,UAItCC,EAAe,GAqBfC,EAAO,WACX,IApBMC,EAoBAC,EAAyBH,EAAMG,aApB/BD,EAAmBE,SAASC,cAAc,QAC5CC,GAAKT,EACTK,EAAIK,MAAMC,QAAU,6TAcpBR,EAAMG,UAAYD,EACXA,GAIDO,EAAsBL,SAASM,KAAKC,SAAS,GAC/CF,GAAoC,iBAAfA,GAA2BA,EAAWH,KAAOT,GAGtEO,SAASM,KAAKE,aAAaT,EAAWM,IAclCI,EAAW,SAACC,EAAeC,gBAAAA,MAC/B,IAAMC,EAZQ,SAACC,gBAAAA,SACf,IAAMD,EAAmBZ,SAASC,cAAcY,GAOhD,OANAD,EAAIT,MAAMC,QAAU,8FAMbQ,EAIkBE,IACzBF,EAAIG,UAAYL,EACZC,KACgBX,SAASgB,eAAevB,IAExCI,KAGAD,EAAMG,WACRH,EAAMG,UAAUkB,YAAYL,ICtD1BhB,EAAQ,CACZC,MAAM,GAEFe,EAAM,CACVV,GAAIT,EACJmB,IAAK,SAACF,EAAeC,gBAAAA,MACdf,EAAMC,OACTA,IACAD,EAAMC,MAAO,GAEfY,EAASC,EAAOC,KAKpB,SAASO,QAAQ,aAAAC,mBAAAA,IAAAT,kBACf,IAAK,IAAIU,EAAI,EAAGA,EAAIV,EAAMW,OAAQD,IAChC,IACER,EAAIA,IAAIF,EAAMU,GAAGE,kBACVC,GACPX,EAAIA,IAAI,GAAGF,EAAMU,KAMvB,GAAKI,OAAOC,QAKL,CACL,IAAMC,EAAcF,OAAOC,QAAQb,IACnCY,OAAOC,QAAQb,IAAM,eAAS,aAAAO,mBAAAA,IAAAT,kBAC5BgB,EAAYC,WAAZD,GAAiBF,OAAOC,gBAAYf,IACpCQ,eAAWR,SAPbc,OAAOC,QAAU,CACfb,IAAKM"}